<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<title>控制台 - Bootstrap后台管理系统模版Ace下载</title>
		<meta name="keywords" content="Bootstrap模版,Bootstrap模版下载,Bootstrap教程,Bootstrap中文" />
		<meta name="description" content="JS代码网提供Bootstrap模版,Bootstrap教程,Bootstrap中文翻译等相关Bootstrap插件下载" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<!-- basic styles -->
		<link href="__ADMIN__/assets/css/bootstrap.min.css" rel="stylesheet" />
		<link rel="stylesheet" href="__ADMIN__/assets/css/font-awesome.min.css" />


		<link rel="stylesheet" href="__ADMIN__/assets/css/ace.min.css" />
		<link rel="stylesheet" href="__ADMIN__/assets/css/ace-rtl.min.css" />
		<link rel="stylesheet" href="__ADMIN__/assets/css/ace-skins.min.css" />

		<!--[if lte IE 8]>
		  <link rel="stylesheet" href="__ADMIN__/assets/css/ace-ie.min.css" />
		<![endif]-->

		<!-- inline styles related to this page -->

		<!-- ace settings handler -->

		<script src="__ADMIN__/assets/js/ace-extra.min.js"></script>
	</head>

	<body>
	<!--引入 navbar -->
		{include file='public/navbar'}
		<div class="main-container" id="main-container">
			<script type="text/javascript">
				try{ace.settings.check('main-container' , 'fixed')}catch(e){}
			</script>

		<div class="main-container-inner">
				<a class="menu-toggler" id="menu-toggler" href="#">
					<span class="menu-text"></span>
				</a>

				<!-- sidebar -->
				{include file='public/sidebar'}
				<!-- /sidebar -->

<div class="main-content">
			<div class="breadcrumbs" id="breadcrumbs">
				<script type="text/javascript">
					try{ace.settings.check('breadcrumbs' , 'fixed')}catch(e){}
				</script>

				<ul class="breadcrumb">
					<li>
						<i class="icon-home home-icon"></i>
						<a href="#">首页</a>
					</li>
					<li class="active">控制台</li>
				</ul><!-- .breadcrumb -->

				<div class="nav-search" id="nav-search">
					<form class="form-search">
						<span class="input-icon">
							<input type="text" placeholder="Search ..." class="nav-search-input" id="nav-search-input" autocomplete="off" />
							<i class="icon-search nav-search-icon"></i>
						</span>
					</form>
				</div><!-- #nav-search -->
			</div>
		<div class="page-content">
		<div class="page-header">
			<h1>
				商品管理
				<small>
					<i class="icon-double-angle-right"></i>
					 添加商品
				</small>
			</h1>
		</div><!-- /.page-header -->
			<div class="row">
				<div class="col-xs-12">
					<form class="form-horizontal" role="form" action="{:url('goods/addhanddle')}" method="post" enctype="multipart/form-data">
						<div class="form-group">
							<label class="col-sm-1 control-label no-padding-right" for="goods_name"> 商品名称 </label>
							<div class="col-xs-10">
								<input id="goods_name" name="goods_name" placeholder="请输入商品名称" class="col-xs-10 col-sm-5" type="text">
							</div>
						</div>

						<div class="form-group">
							<label class="col-sm-1 control-label no-padding-right" for="goods_price"> 商品价格 </label>
							<div class="col-xs-10">
								<input id="goods_price" name="goods_price" placeholder="请输入商品价格" class="col-xs-10 col-sm-5" type="text">
							</div>
						</div>


						<div class="form-group">
							<label class="col-sm-1 control-label no-padding-right" for="goods_after_price"> 促销价格 </label>
							<div class="col-xs-10">
								<input id="goods_after_price" name="goods_after_price" placeholder="不促销就不用写" class="col-xs-10 col-sm-5" type="text">
							</div>
						</div>

						<div class="form-group">
							<label class="col-sm-1 control-label no-padding-right" for="goods_sales"> 商品销量 </label>
							<div class="col-xs-10">
								<input id="goods_sales" name="goods_sales" placeholder="请输入商品销量" class="col-xs-10 col-sm-5" type="text">
							</div>
						</div>


						<div class="form-group">
							<label class="col-sm-1 control-label no-padding-right" for="goods_inventory"> 商品库存 </label>
							<div class="col-xs-10">
								<input id="goods_inventory" name="goods_inventory" placeholder="请输入商品库存" class="col-xs-10 col-sm-5" type="text">
							</div>
						</div>

						<div class="form-group">
							<label class="col-sm-1 control-label no-padding-right" for="goods_status"> 是否上架 </label>
							<div class="col-xs-4">
							<input name="goods_status" class="ace ace-switch ace-switch-5" type="checkbox" value="1" checked="">
							<span class="lbl"></span>
								<!-- <input id="goods_status" name="goods_status" placeholder="请输入商品状态" class="col-xs-10 col-sm-5" type="text"> -->
							</div>
						</div>


						<div class="form-group">
							<label class="col-sm-1 control-label no-padding-right" for="goods_img">商品细节图</label>
							<div class="col-xs-4">
							<div class="progress">
								<div id="img_progress" class="progress-bar" style="width:0%;"></div>
							</div>
							<span id="img_upload" class="btn btn-primary fileinput-button">  
								<span>上传</span>
								<input id="goods_img" placeholder="" class="" type="file" name="goods_img" multiple="">
							</span> 
							<div class="preview" style="margin-top:20px;"></div>
							</div>
						</div>


						<!-- <div class="form-group"> -->
						<!-- <label class="col-sm-3 control-label no-padding-right" for="thumb"> 商品图片 </label> -->
						<div class="form-group">
						<label class="col-sm-1 control-label no-padding-right" for="goods_thumb"> 商品图片</label>
							<div class="col-xs-9">
							<img src="__ADMIN__/assets/images/upload.png" id="img" name="img" an id="thumb_upload" class="btn fileinput-button" style="width:18%">
							<div class="space-4"></div>
								<div class="progress" style="width:18%">
									<div id="thumb_progress" class="progress-bar" style="width:0%;">
									</div>
								</div>
							<span id="thumb_upload" class="btn btn-primary fileinput-button">  
							<span>上传</span>
							<input id="goods_thumb" placeholder="" class="" type="file" name="goods_thumb">
							</span>
							<a id="thumb_cancle" href="javascript:void(0)" class="btn btn-warning" role="button" onclick="cancleUpload()" style="display:none" >删除</a>  
							</div>
						</div>


				<div class="form-group">
				<label class="col-sm-1 control-label no-padding-right" for="goods_pid"> 所属分类 </label>
				<div class="col-xs-4">
					<ul class="nav nav-list">
					{volist name="cate_list" id="vo1"}
						<li class="active">
							<a href="#" class="dropdown-toggle">
								<!-- <i class="icon-desktop"></i> -->
								<span class="menu-text">{$vo1.cate_name}</span>

								<b class="arrow icon-angle-down"></b>
							</a>
							<ul class="submenu" style="display: none;">
							{volist name="vo1.children" id="vo2"}
								<li class="open">
									<a href="#" class="dropdown-toggle">
										<i class="icon-double-angle-right"></i>
										{$vo2.cate_name}
										<b class="arrow icon-angle-down"></b>
									</a>
									
									<ul class="submenu" style="display: none;">
									<div class="col-sm-12">
										{volist name="vo2.children" id="vo3"}
										<li ><input name="goods_pid" value="{$vo3.cate_id}" type="radio" >
										{$vo3.cate_name}</li>
										<!-- <option value="{$vo3.cate_id}">{$vo3.cate_name}</option> -->
										{/volist}
									</div>
									</ul>
								</li>
							{/volist}
							</ul>
						</li>
					{/volist}
					</ul>
				</div>
				</div>


						<div class="space-4"></div>
						<div class="clearfix form-actions">
							<div class="col-md-offset-3 col-md-9">
							<input type="submit" name="" value="添加商品" class="btn btn-success">
							<input type="reset" name="" value="重置" class="btn btn-danger">
							</div>
						</div>								
					</form>
				</div>
			</div>
		</div><!-- /.page-content -->
</div><!-- /.main-content -->

		
		</div><!-- /.main-container-inner -->

		
		</div><!-- /.main-container -->

		<!-- basic scripts -->

		<!--[if !IE]> -->

		<!-- <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script> -->

		<!-- <![endif]-->

		<!--[if IE]>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<![endif]-->

		<!--[if !IE]> -->

		<script type="text/javascript">
			window.jQuery || document.write("<script src='__ADMIN__/assets/js/jquery-2.0.3.min.js'>"+"<"+"script>");
		</script>

		<!-- <![endif]-->

		<!--[if IE]>
<script type="text/javascript">
 window.jQuery || document.write("<script src='__ADMIN__/assets/js/jquery-1.10.2.min.js'>"+"<"+"script>");
</script>
<![endif]-->

		<script type="text/javascript">
			if("ontouchend" in document) document.write("<script src='__ADMIN__/assets/js/jquery.mobile.custom.min.js'>"+"<"+"script>");
		</script>
		<script src="__ADMIN__/assets/js/bootstrap.min.js"></script>
		<script src="__ADMIN__/assets/js/typeahead-bs2.min.js"></script>

		<!-- page specific plugin scripts -->

		<!--[if lte IE 8]>
		  <script src="__ADMIN__/assets/js/excanvas.min.js"></script>
		<![endif]-->

		<script src="__ADMIN__/assets/js/jquery-ui-1.10.3.custom.min.js"></script>
		<script src="__ADMIN__/assets/js/jquery.ui.touch-punch.min.js"></script>
		<script src="__ADMIN__/assets/js/jquery.slimscroll.min.js"></script>
		<script src="__ADMIN__/assets/js/jquery.easy-pie-chart.min.js"></script>
		<script src="__ADMIN__/assets/js/jquery.sparkline.min.js"></script>
		<script src="__ADMIN__/assets/js/flot/jquery.flot.min.js"></script>
		<script src="__ADMIN__/assets/js/flot/jquery.flot.pie.min.js"></script>
		<script src="__ADMIN__/assets/js/flot/jquery.flot.resize.min.js"></script>

		<!-- ace scripts -->

		<script src="__ADMIN__/assets/js/ace-elements.min.js"></script>
		<script src="__ADMIN__/assets/js/ace.min.js"></script>

		<!-- inline scripts related to this page -->

		<!-- jqeury-file-upload -->
		<!-- <link href="__ADMIN__/css/bootstrap.min.css" rel="stylesheet">   -->
		<link rel="stylesheet" href="__ADMIN__/jfu/css/jquery.fileupload.css">  
		<link rel="stylesheet" href="__ADMIN__/jfu/css/jquery.fileupload-ui.css"> 
		<!-- <script src="__ADMIN__/js/jquery-2.0.3.min.js"></script>  -->
		<script src="__ADMIN__/jfu/js/vendor/jquery.ui.widget.js"></script>  
		<script src="__ADMIN__/jfu/js/jquery.fileupload.js"></script>  
		<script src="__ADMIN__/jfu/js/jquery.iframe-transport.js"></script>  


		<!-- 上传图片的js -->
		<script type="text/javascript">
		    $(function() {  
		        $("#goods_thumb").fileupload({  
		                url:'{:url("admin/goods/uploadthumb")}', //在js调用uploadthumb函数
		                sequentialUploads: true  
		            }).bind('fileuploadprogress', function (e, data) {  
		                var progress = parseInt(data.loaded / data.total * 100, 10);  
		                $("#thumb_progress").css('width',progress + '%');  
		                $("#thumb_progress").html(progress + '%');  
		            }).bind('fileuploaddone', function (e, data) {console.log(data);
		                //通过调用uploadthumb函数返回的上传图片的路径来显示图片
		                $("#img").attr("src",data.result);  
		                $("#thumb_upload").css({display:"none"});
		                $("#thumb_cancle").css({display:"",width:"18%"});
		            });  
		                 
		        });
		</script> 

		<!-- 删除图片的js -->
		<script type="text/javascript">
		    $(function() {  
		        $('#thumb_cancle').click(function(){  
		                $.ajax({
 							url: '{:url("admin/goods/canclethumb")}', //在js调用canclethumb函数
 							type:'post',
 							success:function(data){
 								$("#thumb_upload").css({display:"",width:"18%"});
		               			$("#thumb_cancle").css({display:"none"});
		               			$("#thumb_progress").css('width',0);
		               			$("#thumb_progress").html('');
		               			$("#img").attr("src","__ADMIN__/assets/images/upload.png");
 							}
		                })
		             });
		                 
		        });
		    
		</script> 
			<!-- 商品细节图，多图上传的js -->
			<script type="text/javascript">
			$(function(){
				$('#goods_img').fileupload({
					url:'{:url("admin/goods/imgupload")}',
					dataType: "json",   
				    multipart:true,
				    sequentialUploads: true,
				    done:function(e,data){
				    	$(".preview").append("<div style='margin-top:10px;'><img src="+data.result+" width='100'>");
				    	$(".preview").append("<a class='img_cancle btn btn-warning' role='button' style=''>删除</a></div>");
				    },
				    progressall:function(e,data){
				    	var progress = parseInt(data.loaded / data.total * 100, 10);  
				        $("#img_progress").css("width", progress + "%");  
				        $("#img_progress").html("上传总进度："+progress+"%"); 
				    }
				})
			})

			</script>
			<script type="text/javascript">
				$(function(){
					$(".preview").on("click",".img_cancle",function(){
						 var index = $(".preview a").index(this);
						 var me = this;
			   			 $.ajax({
			   			 	data:{'index':index},
			   			 	type:"post",
			   			 	url:"{:url('admin/goods/imgcancle')}",
			   			 	success:function(data){
			   			 		$(me).prev('div').css({display:"none"});
			   			 		$(me).css({display:"none"});
			   			 	}
			   			 })
					})
				})
			</script>

	</body>
</html>

